name: Retry failing job

on:
  push:
  workflow_dispatch:

jobs:
  randomly-failing-job:
    runs-on: ubuntu-latest
    steps:
      - name: Get Current Job Log URL
        uses: Tiryoh/gha-jobid-action@v0
        id: jobs
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          job_name: randomly-failing-job

      - name: Output Current Job Log URL
        run: echo ${{ steps.jobs.outputs.html_url }}

      - name: Step that fails randomly
        run: |
          return $((RANDOM % 2))
          echo $?

  # retry-job:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Step that fails randomly
  #       run: |
  #         curl -X POST /projects/:id/jobs/:job_id/retry 
  
